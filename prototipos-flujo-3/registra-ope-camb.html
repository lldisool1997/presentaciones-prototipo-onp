<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Operación Cambiaria</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Toastr -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet"/>

  <!-- Select2 -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet"/>

  <!-- libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cleave.js/1.6.0/cleave.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- Tu CSS general; no hace falta cambiarlo -->
  <link rel="stylesheet" href="css/operacion-cambiaria.css">
</head>
<body class="bg-gray-100 text-slate-800">
  <div id="area-badge"
     style="position: absolute; top: 15px; right: 20px;
            background-color: #1e6ba8; color: #fff;
            font-weight: bold; font-size: 0.9rem;
            padding: 6px 14px; border-radius: 20px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.15);">
  Área: -
</div>
  <main class="max-w-screen-xl mx-auto px-4 py-6">
    <!-- Header -->
     <div class="header rounded-2xl rounded-b-none">
                <h1>Operación Cambiaria</h1>
            </div>
    <!-- ======= TABS ======= -->
    <section class="bg-white rounded-2xl rounded-t-none border border-gray-200 shadow">
      <!-- Tab bar -->
      <div class="oc-tabs px-4 pt-4">
        <div class="oc-tablist" role="tablist" aria-label="Tabs Operación cambiaria">
          <!-- Las transferencias se insertan inmediatamente ANTES de este botón -->
       <button class="oc-tab is-active"
        role="tab" aria-selected="true"
        aria-controls="tab-operacion"
        id="tabbtn-operacion"
        data-tab="tab-operacion">Operación</button>

          <!-- Botón para añadir (se mantiene a la derecha) -->
          <button id="btnAddTransferencia" type="button" class="oc-tab-add" title="Añadir transferencia">
            + Añadir transferencia
          </button>
        </div>
      </div>

      <!-- Tab panels -->
      <div class="oc-panels p-5">
        <!-- Panel Operación (fijo, sin comisión ni sustento) -->
        <section id="tab-operacion" class="oc-panel is-active" role="tabpanel" aria-labelledby="tabbtn-operacion">
          <div class="section-header">1. Registro de Operación cambiaria</div>

          <form id="formOperacion" class="space-y-4" novalidate>
            <div class="dashed card p-4">
              <div class="grid md:grid-cols-6 gap-4">
                <div>
                  <label class="lbl">Moneda Origen</label>
                  <select id="oc_moneda_origen" class="inp">
                    <option value="PEN">PEN</option>
                    <option value="USD">USD</option>
                  </select>
                </div>

                <div class="md:col-span-2">
                  <label class="lbl">Importe Origen</label>
                  <input id="oc_importe_origen" type="text" class="inp" placeholder="100,000,000.00" inputmode="decimal">
                </div>

                <div>
                  <label class="lbl">Tipo de Cambio</label>
                  <input id="oc_tipo_cambio" type="text" class="inp" placeholder="3.454554" inputmode="decimal">
                </div>

                <div>
                  <label class="lbl">Moneda Destino</label>
                  <select id="oc_moneda_destino" class="inp">
                    <option value="USD">USD</option>
                    <option value="PEN">PEN</option>
                  </select>
                </div>

                <div>
                  <label class="lbl">Importe Destino</label>
                  <input id="oc_importe_destino" readonly type="text" class="inp" placeholder="100,000,000.00" inputmode="decimal">
                </div>
              </div>

              <div class="grid md:grid-cols-2 gap-4 mt-3">
                <div>
                  <label class="lbl">Banco cuenta cargo</label>
                  <select id="oc_banco_cargo" class="sel2" style="width:100%"></select>
                </div>
                <div>
                  <label class="lbl">Nro Cuenta Bancaria</label>
                  <select id="oc_cuenta_cargo" class="sel2" style="width:100%"></select>
                </div>
              </div>

              <div class="grid md:grid-cols-2 gap-4 mt-3">
                <div>
                  <label class="lbl">Banco cuenta destino</label>
                  <select id="oc_banco_destino" class="sel2" style="width:100%"></select>
                </div>
                <div>
                  <label class="lbl">Nro Cuenta Destino</label>
                  <select id="oc_cuenta_destino" class="sel2" style="width:100%"></select>
                </div>
              </div>

              <div class="grid md:grid-cols-3 gap-4 mt-3">
                <div>
                  <label class="lbl">Fecha de cambio</label>
                  <input id="oc_fecha" type="date" class="inp">
                </div>
              </div>
            </div>

            <!-- Botonera final -->
            <div class="flex justify-end gap-3 pt-3">
              <button type="button" id="btnCancelar" class="btn-secondary">Cancelar</button>
              <button type="submit" id="btnInstruir" class="btn-primary">Confirmar</button>
            </div>
          </form>
        </section>

        <!-- Paneles de transferencias (se agregan por JS) -->
        <div id="transfer-panels"></div>
      </div>
    </section>

    <!-- ====== TEMPLATE: Transferencia (solo datos, sin comisión ni sustento) ====== -->
    <template id="tplTransferencia">
      <section class="oc-panel">
        <div class="flex items-center justify-between mb-2">
          <h3 class="trf-title">Transferencia <span class="num">1</span></h3>
          <button type="button" class="btn-subtle btnEliminarTransferencia">Eliminar</button>
        </div>

        <!-- Datos de la transferencia -->
        <div class="card p-4">
          <div class="grid gap-4 md:grid-cols-2">
            <div>
              <label class="lbl">Moneda</label>
              <select class="inp sel-moneda" >
                <option value="PEN">PEN</option>
                <option value="USD">USD</option>
              </select>
            </div>
            <div>
              <label class="lbl">Monto</label>
              <input type="text" class="inp txt-monto" placeholder="Ej. 1,310,067.70" inputmode="decimal">
            </div>
          </div>

          <div class="grid gap-4 md:grid-cols-2 mt-3">
            <div>
              <label class="lbl">Banco cuenta de cargo</label>
              <select class="sel2 sel-banco-cargo" style="width:100%"></select>
              <p class="help">Selecciona el banco desde donde se realizará el aporte.</p>
            </div>
            <div>
              <label class="lbl">Nro cuenta bancaria</label>
              <select class="sel2 sel-cuenta-cargo" style="width:100%"></select>
              <p class="help">Selecciona la cuenta desde donde se realizará el aporte.</p>
            </div>
          </div>

          <div class="grid gap-4 md:grid-cols-2 mt-3">
            <div>
              <label class="lbl">Banco cuenta destino</label>
              <select class="sel2 sel-banco-destino" style="width:100%"></select>
              <p class="help">Selecciona el banco destino del aporte.</p>
            </div>
            <div>
              <label class="lbl">Nro cuenta destino</label>
              <select class="sel2 sel-cuenta-destino" style="width:100%"></select>
            </div>
          </div>
        </div>

        <div class="flex justify-end gap-3 mt-4">
          <button type="button" class="btn-primary trf-btn-confirmar">Confirmar</button>
        </div>
      </section>
    </template>
  </main>

  <!-- JS -->
  <script src="js/operacion-cambiaria.js"></script>
</body>
</html>
